<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>API requests — request_webapi • steamr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="API requests — request_webapi"><meta property="og:description" content="Send HTTP requests to any of the available Steam APIs. As of yet,
steamr supports the Web API, storefront API, SteamSpy and
steamcmd.net. Generic requests to any other URL can also be made."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">steamr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/steamr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/auth-session.html">API keys and authentication</a>
    </li>
    <li>
      <a href="../articles/steamid.html">Converting Steam IDs</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>API requests</h1>
    
    <div class="hidden name"><code>request_webapi.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Send HTTP requests to any of the available Steam APIs. As of yet,
<code>steamr</code> supports the Web API, storefront API, SteamSpy and
steamcmd.net. Generic requests to any other URL can also be made.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">request_webapi</span><span class="op">(</span></span>
<span>  <span class="va">api</span>,</span>
<span>  <span class="va">interface</span>,</span>
<span>  <span class="va">method</span>,</span>
<span>  version <span class="op">=</span> <span class="st">"v1"</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  http_method <span class="op">=</span> <span class="st">"GET"</span>,</span>
<span>  simplify <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  paginate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"json"</span>, <span class="st">"xml"</span>, <span class="st">"vdf"</span><span class="op">)</span>,</span>
<span>  serror <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dry <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">request_storefront</span><span class="op">(</span></span>
<span>  <span class="va">api</span>,</span>
<span>  <span class="va">interface</span>,</span>
<span>  <span class="va">method</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  params_as_query <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  simplify <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  paginate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dry <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">request_steamspy</span><span class="op">(</span><span class="va">params</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">request_generic</span><span class="op">(</span></span>
<span>  <span class="va">url</span>,</span>
<span>  params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"GET"</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"json"</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  headers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dry <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">public_api</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">partner_api</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">store_api</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">comm_api</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">valve_api</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>api</dt>
<dd><p>URL to a supported Steam API. Can be <code>public_api()</code>
(public Web API), <code>partner_api()</code> (private Web API),
<code>store_api()</code> (store.steampowered), <code>comm_api()</code> (steamcommunity),
or <code>valve_api()</code> (valvesoftware). Can also be any other host.</p></dd>


<dt>interface</dt>
<dd><p>Interface containing the API method.</p></dd>


<dt>method</dt>
<dd><p>Method that is to be requested.</p></dd>


<dt>version</dt>
<dd><p>Version string of the API method. Usually, this is <code>v1</code>,
sometimes it is <code>v2</code>, and in rare occasions it can go as high as
<code>v3</code>.</p></dd>


<dt>params</dt>
<dd><p>A list of parameters to send with the request. Note that
<code>input_json</code> blobs need to be pre-formatted. Most (but not all)
methods require an API key in the <code>key</code> parameter. Authenticated
methods require an access_token in <code>access_token</code>.</p></dd>


<dt>http_method</dt>
<dd><p>HTTP method to be used. The Steam Web API and storefront
API only take <code>GET</code> and <code>POST</code>.</p></dd>


<dt>simplify</dt>
<dd><p>Whether to simplify the output or leave it as a nested
list.</p></dd>


<dt>paginate</dt>
<dd><p>If specified, tries to paginate through response pages.
Can be one of <code>cursor</code>, <code>offset</code>, and <code>input_json</code>.
<code>cursor</code> takes the <code>next_cursor</code> value of the response and
re-inserts it in the <code>cursor</code> parameter of the next request
(see <code><a href="https://httr2.r-lib.org/reference/iterate_with_offset.html" class="external-link">iterate_with_cursor</a></code>). <code>offset</code> takes
increments the <code>page</code> parameter by 1 with
each request (see <code><a href="https://httr2.r-lib.org/reference/iterate_with_offset.html" class="external-link">iterate_with_offset</a></code>).
<code>input_json</code> re-creates the <code>input_json</code> blob
with an incremented <code>page</code> parameter with each request.</p></dd>


<dt>format</dt>
<dd><p>Format of the response. One of <code>json</code>, <code>xml</code>, or
<code>vdf</code>. <code>vdf</code> is Steam's
<a href="https://developer.valvesoftware.com/wiki/KeyValues" class="external-link">KeyValues</a> format,
which can be parsed using <code><a href="parse_vdf.html">parse_vdf</a></code>.</p></dd>


<dt>serror</dt>
<dd><p>Whether to throw a formatted error when the response has the
<code>X-eresult</code> header signifying an API error.</p></dd>


<dt>dry</dt>
<dd><p>If <code>TRUE</code> does not run the request, but returns the
result of a dry run to a local server. See <code><a href="https://httr2.r-lib.org/reference/req_dry_run.html" class="external-link">req_dry_run</a></code>.</p></dd>


<dt>params_as_query</dt>
<dd><p>In most storefront endpoints, parameters are
passed as a URL query (i.e. <code>domain.org/path?name=param</code>). However, some endpoints expect them to be passed
as a URL path (i.e. <code>domain.org/path/param1/param2</code>). If <code>FALSE</code>, constructs parameters as a URL path,
otherwise as a query.</p></dd>


<dt>url</dt>
<dd><p>URL to send a request to.</p></dd>


<dt>...</dt>
<dd><p>Further arguments passed to the parsing function defined
by <code>format</code>, i.e. <code><a href="https://httr2.r-lib.org/reference/resp_body_raw.html" class="external-link">resp_body_json</a></code>,
<code><a href="https://httr2.r-lib.org/reference/resp_body_raw.html" class="external-link">resp_body_xml</a></code> or <code><a href="https://httr2.r-lib.org/reference/resp_body_raw.html" class="external-link">resp_body_string</a></code>.</p></dd>


<dt>headers</dt>
<dd><p>Key-value pairs of additional headers to append to the
request.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The formatted response of the request. If <code>format = "json"</code>,
formats the response as a list or dataframe (depending on the
<code>simplify</code> argument). If <code>format = "xml"</code>, returns an <code>xml</code></p>


<p>object of the <code><a href="http://xml2.r-lib.org/reference/xml2-package.html" class="external-link">xml2</a></code> library. If <code>format = "vdf"</code>,
returns the unformatted string of a VDF document that can be parsed with
<code><a href="parse_vdf.html">parse_vdf</a></code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># simple Web API request</span></span></span>
<span class="r-in"><span><span class="fu">request_webapi</span><span class="op">(</span></span></span>
<span class="r-in"><span>  api <span class="op">=</span> <span class="fu">public_api</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  interface <span class="op">=</span> <span class="st">"ISteamApps"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"GetAppList"</span>,</span></span>
<span class="r-in"><span>  version <span class="op">=</span> <span class="st">"v2"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># paginate through query results</span></span></span>
<span class="r-in"><span><span class="co"># QueryRewardItems uses cursors but other methods</span></span></span>
<span class="r-in"><span><span class="co"># also use page parameters</span></span></span>
<span class="r-in"><span><span class="fu">request_webapi</span><span class="op">(</span></span></span>
<span class="r-in"><span>  api <span class="op">=</span> <span class="fu">public_api</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  interface <span class="op">=</span> <span class="st">"ILoyaltyRewardsService"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"QueryRewardItems"</span>,</span></span>
<span class="r-in"><span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>appids <span class="op">=</span> <span class="fl">440</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  paginate <span class="op">=</span> <span class="st">"cursor"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># send a storefront request</span></span></span>
<span class="r-in"><span><span class="fu">request_storefront</span><span class="op">(</span></span></span>
<span class="r-in"><span>  api <span class="op">=</span> <span class="fu">store_api</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  interface <span class="op">=</span> <span class="st">"search"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"suggest"</span>,</span></span>
<span class="r-in"><span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>term <span class="op">=</span> <span class="st">"team fortress"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># request_steamspy is a low-level alternative to the</span></span></span>
<span class="r-in"><span><span class="co"># steamspy function</span></span></span>
<span class="r-in"><span><span class="fu">request_steamspy</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>request <span class="op">=</span> <span class="st">"tag"</span>, tag <span class="op">=</span> <span class="st">"Early Access"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># request_generic exists to enable non-standard API queries</span></span></span>
<span class="r-in"><span><span class="co"># the following example is used internally in auth_* functions</span></span></span>
<span class="r-in"><span><span class="fu">request_generic</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"https://login.steampowered.com/jwt/finalizelogin"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"POST"</span>,</span></span>
<span class="r-in"><span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    nonce <span class="op">=</span> <span class="st">"&lt;refresh token&gt;"</span>,</span></span>
<span class="r-in"><span>    sessionid <span class="op">=</span> <span class="st">"&lt;sessionid&gt;"</span>,</span></span>
<span class="r-in"><span>    redir <span class="op">=</span> <span class="st">"https://steamcommunity.com/login/home/?goto="</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jonas Lieth.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

